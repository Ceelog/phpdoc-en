exif\_imagetype
===============

Determine the type of an image

### Description

<span class="type">int</span> <span
class="methodname">exif\_imagetype</span> ( <span
class="methodparam"><span class="type">string</span> `$filename`</span>
)

<span class="function">exif\_imagetype</span> reads the first bytes of
an image and checks its signature.

<span class="function">exif\_imagetype</span> can be used to avoid calls
to other <a href="/ref/exif.html" class="link">exif</a> functions with
unsupported file types or in conjunction with `$_SERVER['HTTP_ACCEPT']`
to check whether or not the viewer is able to see a specific image in
the browser.

### Parameters

`filename`  
<span class="simpara"> The image being checked. </span>

### Return Values

When a correct signature is found, the appropriate constant value will
be returned otherwise the return value is **`FALSE`**. The return value
is the same value that <span class="function">getimagesize</span>
returns in index 2 but <span class="function">exif\_imagetype</span> is
much faster.

> **Note**:
>
> <span class="function">exif\_imagetype</span> will emit an
> **`E_NOTICE`** and return **`FALSE`** if it is unable to read enough
> bytes from the file to determine the image type.

### Changelog

| Version | Description         |
|---------|---------------------|
| 7.1.0   | Added WebP support. |

### Predefined Constants

The following constants are defined, and represent possible <span
class="function">exif\_imagetype</span> return values:

| Value | Constant                                      |
|-------|-----------------------------------------------|
| 1     | **`IMAGETYPE_GIF`**                           |
| 2     | **`IMAGETYPE_JPEG`**                          |
| 3     | **`IMAGETYPE_PNG`**                           |
| 4     | **`IMAGETYPE_SWF`**                           |
| 5     | **`IMAGETYPE_PSD`**                           |
| 6     | **`IMAGETYPE_BMP`**                           |
| 7     | **`IMAGETYPE_TIFF_II`** (intel byte order)    |
| 8     | **`IMAGETYPE_TIFF_MM`** (motorola byte order) |
| 9     | **`IMAGETYPE_JPC`**                           |
| 10    | **`IMAGETYPE_JP2`**                           |
| 11    | **`IMAGETYPE_JPX`**                           |
| 12    | **`IMAGETYPE_JB2`**                           |
| 13    | **`IMAGETYPE_SWC`**                           |
| 14    | **`IMAGETYPE_IFF`**                           |
| 15    | **`IMAGETYPE_WBMP`**                          |
| 16    | **`IMAGETYPE_XBM`**                           |
| 17    | **`IMAGETYPE_ICO`**                           |
| 18    | **`IMAGETYPE_WEBP`**                          |

### Examples

**Example \#1 <span class="function">exif\_imagetype</span> example**

``` php
<?php
if (exif_imagetype('image.gif') != IMAGETYPE_GIF) {
    echo 'The picture is not a gif';
}
?>
```

### See Also

-   <span class="function">image\_type\_to\_mime\_type</span>
-   <span class="function">getimagesize</span>

exif\_read\_data
================

Reads the EXIF headers from an image file

### Description

<span class="type">array</span> <span
class="methodname">exif\_read\_data</span> ( <span
class="methodparam"><span class="type">mixed</span> `$stream`</span> \[,
<span class="methodparam"><span class="type">string</span>
`$sections`<span class="initializer"> = **`NULL`**</span></span> \[,
<span class="methodparam"><span class="type">bool</span> `$arrays`<span
class="initializer"> = **`FALSE`**</span></span> \[, <span
class="methodparam"><span class="type">bool</span> `$thumbnail`<span
class="initializer"> = **`FALSE`**</span></span> \]\]\] )

<span class="function">exif\_read\_data</span> reads the EXIF headers
from an image file. This way you can read meta data generated by digital
cameras.

EXIF headers tend to be present in JPEG/TIFF images generated by digital
cameras, but unfortunately each digital camera maker has a different
idea of how to actually tag their images, so you can't always rely on a
specific Exif header being present.

*Height* and *Width* are computed the same way <span
class="function">getimagesize</span> does so their values must not be
part of any header returned. Also, *html* is a height/width text string
to be used inside normal HTML.

When an Exif header contains a Copyright note, this itself can contain
two values. As the solution is inconsistent in the Exif 2.10 standard,
the *COMPUTED* section will return both entries *Copyright.Photographer*
and *Copyright.Editor* while the *IFD0* sections contains the byte array
with the NULL character that splits both entries. Or just the first
entry if the datatype was wrong (normal behaviour of Exif). The
*COMPUTED* will also contain the entry *Copyright* which is either the
original copyright string, or a comma separated list of the photo and
editor copyright.

The tag *UserComment* has the same problem as the Copyright tag. It can
store two values. First the encoding used, and second the value itself.
If so the *IFD* section only contains the encoding or a byte array. The
*COMPUTED* section will store both in the entries *UserCommentEncoding*
and *UserComment*. The entry *UserComment* is available in both cases so
it should be used in preference to the value in *IFD0* section.

<span class="function">exif\_read\_data</span> also validates EXIF data
tags according to the EXIF specification
(<a href="http://exif.org/Exif2-2.PDF" class="link external">» http://exif.org/Exif2-2.PDF</a>,
page 20).

> **Note**:
>
> Windows Me/XP can both wipe the Exif headers when connecting to a
> camera.

### Parameters

`stream`  
The location of the image file. This can either be a path to the file
(stream wrappers are also supported as usual) or a stream <span
class="type">resource</span>.

`sections`  
Is a comma separated list of sections that need to be present in file to
produce a result <span class="type">array</span>. If none of the
requested sections could be found the return value is **`FALSE`**.

|           |                                                                                                                                                                                                                                                                                    |
|-----------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| FILE      | FileName, FileSize, FileDateTime, SectionsFound                                                                                                                                                                                                                                    |
| COMPUTED  | html, Width, Height, IsColor, and more if available. Height and Width are computed the same way <span class="function">getimagesize</span> does so their values must not be part of any header returned. Also, *html* is a height/width text string to be used inside normal HTML. |
| ANY\_TAG  | Any information that has a Tag e.g. *IFD0*, *EXIF*, ...                                                                                                                                                                                                                            |
| IFD0      | All tagged data of IFD0. In normal imagefiles this contains image size and so forth.                                                                                                                                                                                               |
| THUMBNAIL | A file is supposed to contain a thumbnail if it has a second *IFD*. All tagged information about the embedded thumbnail is stored in this section.                                                                                                                                 |
| COMMENT   | Comment headers of JPEG images.                                                                                                                                                                                                                                                    |
| EXIF      | The EXIF section is a sub section of *IFD0*. It contains more detailed information about an image. Most of these entries are digital camera related.                                                                                                                               |

`arrays`  
Specifies whether or not each section becomes an array. The `sections`
*COMPUTED*, *THUMBNAIL*, and *COMMENT* always become arrays as they may
contain values whose names conflict with other sections.

`thumbnail`  
When set to **`TRUE`** the thumbnail itself is read. Otherwise, only the
tagged data is read.

### Return Values

It returns an associative <span class="type">array</span> where the
array indexes are the header names and the array values are the values
associated with those headers. If no data can be returned, <span
class="function">exif\_read\_data</span> will return **`FALSE`**.

### Changelog

<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th>Version</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>7.2.0</td>
<td>The <code class="parameter">filename</code> parameter was renamed to <code class="parameter">stream</code> and now supports both local files or stream resources.</td>
</tr>
<tr class="even">
<td>7.2.0</td>
<td>Support for the following EXIF formats were added:
<ul>
<li><span class="simpara"> Samsung </span></li>
<li><span class="simpara"> DJI </span></li>
<li><span class="simpara"> Panasonic </span></li>
<li><span class="simpara"> Sony </span></li>
<li><span class="simpara"> Pentax </span></li>
<li><span class="simpara"> Minolta </span></li>
<li><span class="simpara"> Sigma/Foveon </span></li>
<li><span class="simpara"> AGFA </span></li>
<li><span class="simpara"> Kyocera </span></li>
<li><span class="simpara"> Ricoh </span></li>
<li><span class="simpara"> Epson </span></li>
</ul></td>
</tr>
</tbody>
</table>

### Examples

**Example \#1 <span class="function">exif\_read\_data</span> example**

``` php
<?php
echo "test1.jpg:<br />\n";
$exif = exif_read_data('tests/test1.jpg', 'IFD0');
echo $exif===false ? "No header data found.<br />\n" : "Image contains headers<br />\n";

$exif = exif_read_data('tests/test2.jpg', 0, true);
echo "test2.jpg:<br />\n";
foreach ($exif as $key => $section) {
    foreach ($section as $name => $val) {
        echo "$key.$name: $val<br />\n";
    }
}
?>
```

The first call fails because the image has no header information.

The above example will output something similar to:

    test1.jpg:
    No header data found.
    test2.jpg:
    FILE.FileName: test2.jpg
    FILE.FileDateTime: 1017666176
    FILE.FileSize: 1240
    FILE.FileType: 2
    FILE.SectionsFound: ANY_TAG, IFD0, THUMBNAIL, COMMENT
    COMPUTED.html: width="1" height="1"
    COMPUTED.Height: 1
    COMPUTED.Width: 1
    COMPUTED.IsColor: 1
    COMPUTED.ByteOrderMotorola: 1
    COMPUTED.UserComment: Exif test image.
    COMPUTED.UserCommentEncoding: ASCII
    COMPUTED.Copyright: Photo (c) M.Boerger, Edited by M.Boerger.
    COMPUTED.Copyright.Photographer: Photo (c) M.Boerger
    COMPUTED.Copyright.Editor: Edited by M.Boerger.
    IFD0.Copyright: Photo (c) M.Boerger
    IFD0.UserComment: ASCII
    THUMBNAIL.JPEGInterchangeFormat: 134
    THUMBNAIL.JPEGInterchangeFormatLength: 523
    COMMENT.0: Comment #1.
    COMMENT.1: Comment #2.
    COMMENT.2: Comment #3end
    THUMBNAIL.JPEGInterchangeFormat: 134
    THUMBNAIL.Thumbnail.Height: 1
    THUMBNAIL.Thumbnail.Height: 1

**Example \#2 <span class="function">exif\_read\_data</span> with
streams available as of PHP 7.2.0**

``` php
<?php
// Open a the file, this should be in binary mode
$fp = fopen('/path/to/image.jpg', 'rb');

if (!$fp) {
    echo 'Error: Unable to open image for reading';
    exit;
}

// Attempt to read the exif headers
$headers = exif_read_data($fp);

if (!$headers) {
    echo 'Error: Unable to read exif headers';
    exit;
}

// Print the 'COMPUTED' headers
echo 'EXIF Headers:' . PHP_EOL;

foreach ($headers['COMPUTED'] as $header => $value) {
    printf(' %s => %s%s', $header, $value, PHP_EOL);
}
?>
```

The above example will output something similar to:

    EXIF Headers:
     Height => 576
     Width => 1024
     IsColor => 1
     ByteOrderMotorola => 0
     ApertureFNumber => f/5.6
     UserComment =>
     UserCommentEncoding => UNDEFINED
     Copyright => Denis
     Thumbnail.FileType => 2
     Thumbnail.MimeType => image/jpeg

### Notes

> **Note**:
>
> If <a href="/ref/mbstring.html" class="link">mbstring</a> is enabled,
> exif will attempt to process the unicode and pick a charset as
> specified by
> <a href="/exif/setup.html#" class="link">exif.decode_unicode_motorola</a>
> and
> <a href="/exif/setup.html#" class="link">exif.decode_unicode_intel</a>.
> The exif extension will not attempt to figure out the encoding on its
> own, and it is up to the user to properly specify the encoding for
> which to use for decoding by setting one of these two ini directives
> prior to calling <span class="function">exif\_read\_data</span>.

> **Note**:
>
> If the `stream` is used to pass a stream to this function, then the
> stream must be seekable. Note that the file pointer position is not
> changed after this function returns.

### See Also

-   <span class="function">exif\_thumbnail</span>
-   <span class="function">getimagesize</span>
-   <a href="/wrappers.html" class="xref">Supported Protocols and Wrappers</a>

exif\_tagname
=============

Get the header name for an index

### Description

<span class="type">string</span> <span
class="methodname">exif\_tagname</span> ( <span
class="methodparam"><span class="type">int</span> `$index`</span> )

### Parameters

`index`  
The Tag ID for which a Tag Name will be looked up.

### Return Values

Returns the header name, or **`FALSE`** if `index` is not a defined EXIF
tag id.

### Examples

**Example \#1 <span class="function">exif\_tagname</span> example**

``` php
<?php
echo "256: ".exif_tagname(256).PHP_EOL;
echo "257: ".exif_tagname(257).PHP_EOL;
?>
```

The above example will output:

    256: ImageWidth
    257: ImageLength

### See Also

-   <span class="function">exif\_imagetype</span>
-   <a href="http://exif.org/Exif2-2.PDF" class="link external">» EXIF Specification</a>
-   <a href="http://www.sno.phy.queensu.ca/~phil/exiftool/TagNames/EXIF.html" class="link external">» EXIF Tags</a>

exif\_thumbnail
===============

Retrieve the embedded thumbnail of an image

### Description

<span class="type">string</span> <span
class="methodname">exif\_thumbnail</span> ( <span
class="methodparam"><span class="type">mixed</span> `$stream`</span> \[,
<span class="methodparam"><span class="type">int</span> `&$width`</span>
\[, <span class="methodparam"><span class="type">int</span>
`&$height`</span> \[, <span class="methodparam"><span
class="type">int</span> `&$imagetype`</span> \]\]\] )

<span class="function">exif\_thumbnail</span> reads the embedded
thumbnail of an image.

If you want to deliver thumbnails through this function, you should send
the mimetype information using the <span class="function">header</span>
function.

It is possible that <span class="function">exif\_thumbnail</span> cannot
create an image but can determine its size. In this case, the return
value is **`FALSE`** but `width` and `height` are set.

### Parameters

`stream`  
The location of the image file. This can either be a path to the file or
a stream <span class="type">resource</span>.

`width`  
The return width of the returned thumbnail.

`height`  
The returned height of the returned thumbnail.

`imagetype`  
The returned image type of the returned thumbnail. This is either TIFF
or JPEG.

### Return Values

Returns the embedded thumbnail, or **`FALSE`** if the image contains no
thumbnail.

### Examples

**Example \#1 <span class="function">exif\_thumbnail</span> example**

``` php
<?php
$image = exif_thumbnail('/path/to/image.jpg', $width, $height, $type);

if ($image!==false) {
    header('Content-type: ' .image_type_to_mime_type($type));
    echo $image;
    exit;
} else {
    // no thumbnail available, handle the error here
    echo 'No thumbnail available';
}
?>
```

### Changelog

| Version | Description                                                                                             |
|---------|---------------------------------------------------------------------------------------------------------|
| 7.2.0   | The `filename` parameter was renamed to `stream` and now supports both local files or stream resources. |

### Notes

> **Note**:
>
> If the `stream` is used to pass a stream to this function, then the
> stream must be seekable. Note that the file pointer position is not
> changed after this function returns.

### See Also

-   <span class="function">exif\_read\_data</span>
-   <span class="function">image\_type\_to\_mime\_type</span>

read\_exif\_data
================

Alias of <span class="function">exif\_read\_data</span>

### Description

This function is an alias of: <span
class="function">exif\_read\_data</span>.

### Changelog

| Version | Description                         |
|---------|-------------------------------------|
| 7.2.0   | This function alias was deprecated. |

**Table of Contents**

-   [exif\_imagetype](/ref/exif.html#exif_imagetype) — Determine the
    type of an image
-   [exif\_read\_data](/ref/exif.html#exif_read_data) — Reads the EXIF
    headers from an image file
-   [exif\_tagname](/ref/exif.html#exif_tagname) — Get the header name
    for an index
-   [exif\_thumbnail](/ref/exif.html#exif_thumbnail) — Retrieve the
    embedded thumbnail of an image
-   [read\_exif\_data](/ref/exif.html#read_exif_data) — Alias of
    exif\_read\_data
